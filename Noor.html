<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù„Ø¹Ø¨Ø© Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© â€“ Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·</title>
  <style>
    :root {
      --bg: #f5f8fc;
      --card: #ffffff;
      --border: #d7e2f0;
      --accent: #4285f4;
      --ok: #2ecc71;
      --bad: #e74c3c;
      --text: #222;
      --muted: #555;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
    }
    .wrap { max-width: 960px; margin: 24px auto; padding: 16px; }
    header {
      display: flex; justify-content: space-between; align-items: center;
      flex-wrap: wrap; gap: 10px; margin-bottom: 20px;
    }
    h1 { margin: 0; font-size: 22px; color: var(--accent); }
    select, button {
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 10px 14px;
      font-size: 15px;
      background: #fff;
      color: var(--text);
      cursor: pointer;
      transition: background 0.2s, box-shadow 0.2s;
    }
    button:hover, select:hover { box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    button.primary {
      background: var(--accent);
      color: #fff;
      border: none;
    }
    button.primary:hover { background: #357ae8; }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 18px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.05);
      margin-bottom: 20px;
    }
    .badge {
      display: inline-block;
      background: #eef3fb;
      color: var(--muted);
      border-radius: 50px;
      padding: 4px 10px;
      font-size: 13px;
      margin-left: 5px;
    }
    .progress {
      height: 8px;
      background: #e4ebf6;
      border-radius: 999px;
      overflow: hidden;
      margin: 12px 0;
    }
    .bar {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), #7cb1ff);
      width: 0;
      transition: width 0.4s ease;
    }
    .q-text { font-size: 20px; margin: 14px 0; }
    .options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 10px;
    }
    .opt {
      background: #f8fbff;
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 12px 14px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: center;
    }
    .opt:hover { background: #eaf2ff; }
    .opt.correct { background: #e8f9f0; border-color: var(--ok); }
    .opt.wrong { background: #fdeaea; border-color: var(--bad); }

    .footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 16px;
    }
    .feedback { font-size: 14px; color: var(--muted); }
    .hidden { display: none; }

    .result h2 { color: var(--accent); margin-top: 0; }
    .result .badge { background: #f1f6ff; }
    summary { cursor: pointer; color: var(--accent); }

    @media (max-width: 600px) {
      .options { grid-template-columns: 1fr; }
      h1 { font-size: 18px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
  <header>
      <h1>Ù…Ø¯Ø±Ø³Ø© ØªØ­ÙÙŠØ¸ Ø§Ù„Ù‚Ø±Ø£Ù† Ø§Ù„Ø£ÙˆÙ„Ù‰ - Ø¨Ù…Ø­Ø§ÙØ¸Ø© ÙŠÙ†Ø¨Ø¹</h1>
      <div>
        <h4>Ø¹Ù…Ù„ Ø§Ù„Ø·Ø§Ù„Ø¨Ø© Ù†ÙˆØ± Ù…Ø­Ù…Ø¯ Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„ØµÙŠØ§Ø¯ÙŠ</h4>
      </div>
    </header>
    <header>
      <h1>ğŸŒ¤ï¸ Ù„Ø¹Ø¨Ø© Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© â€“ Ø£ÙˆÙ„ Ù…ØªÙˆØ³Ø·</h1>
      <div>
        <select id="topic">
          <option value="all">ÙƒÙ„ Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹</option>
          <option value="vocabulary">Ø§Ù„Ù…ÙØ±Ø¯Ø§Øª Vocabulary</option>
          <option value="grammar">Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Grammar</option>
        </select>
        <select id="mode">
          <option value="mcq">Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯</option>
          <option value="dropdown">Ø§Ù…Ù„Ø£ Ø§Ù„ÙØ±Ø§Øº</option>
        </select>
        <button id="start" class="primary">Ø§Ø¨Ø¯Ø£</button>
      </div>
    </header>

    <section id="game" class="card hidden">
      <div>
        <span class="badge" id="badgeTopic">â€”</span>
        <span class="badge">Ø³Ø¤Ø§Ù„ <b id="qIndex">0</b>/<span id="qTotal">0</span></span>
        <span class="badge">Ø§Ù„Ù†ØªÙŠØ¬Ø©: <b id="score">0</b></span>
        <span class="badge" id="modeTag">â€”</span>
      </div>
      <div class="progress"><div class="bar" id="bar"></div></div>

      <div id="qArea">
        <div class="q-text" id="qText">â€”</div>
        <div id="mcq" class="options"></div>
        <div id="dropdown" class="hidden"></div>
      </div>

      <div class="footer">
        <div id="feedback" class="feedback"></div>
        <div>
          <button id="skip">ØªØ®Ø·ÙŠ</button>
          <button id="next" class="primary" disabled>Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </div>
      </div>
    </section>

    <section id="summary" class="card hidden">
      <h2>ğŸ‰ Ø£Ø­Ø³Ù†Øª!</h2>
      <p>Ù†ØªÙŠØ¬ØªÙƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:</p>
      <p>
        <span class="badge">Ø§Ù„Ø£Ø³Ø¦Ù„Ø©: <b id="sTotal">0</b></span>
        <span class="badge">Ø§Ù„ØµØ­ÙŠØ­Ø©: <b id="sRight">0</b></span>
        <span class="badge">Ø§Ù„Ù†Ø³Ø¨Ø©: <b id="sPct">0%</b></span>
      </p>
      <button id="restart" class="primary">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
    </section>
  </div>
  <script>
    // =============== Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ===============
    /**
     * Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹Ø§Øª: toBe, pronouns, articles, presentSimple, prepositions
     * Ø§Ù„Ø£Ù†ÙˆØ§Ø¹:   mcq (Ø§Ø®ØªÙŠØ§Ø±) | dropdown (Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ù„Ù…Ù„Ø¡ Ø§Ù„ÙØ±Ø§Øº)
     */
    const BANK = [
      // Verb to be
      {id:"t1", topic:"toBe", type:"mcq", q:"I __ a student.", choices:["am","is","are"], answer:"am"},
      {id:"t2", topic:"toBe", type:"mcq", q:"They __ happy.", choices:["am","is","are"], answer:"are"},
      {id:"t3", topic:"toBe", type:"dropdown", q:"He __ from Jeddah.", choices:["am","is","are"], answer:"is"},
      {id:"t4", topic:"toBe", type:"dropdown", q:"We __ in class.", choices:["am","is","are"], answer:"are"},

      // Pronouns
      {id:"p1", topic:"pronouns", type:"mcq", q:"Ali is my friend. __ is kind.", choices:["He","She","It"], answer:"He"},
      {id:"p2", topic:"pronouns", type:"mcq", q:"The cat is small. __ is cute.", choices:["He","She","It"], answer:"It"},
      {id:"p3", topic:"pronouns", type:"dropdown", q:"Sara is a doctor. __ works at a hospital.", choices:["He","She","They"], answer:"She"},
      {id:"p4", topic:"pronouns", type:"dropdown", q:"My brother and I are students. __ study English.", choices:["He","She","We"], answer:"We"},

      // Articles a/an/the
      {id:"a1", topic:"articles", type:"mcq", q:"__ apple is on the table.", choices:["A","An","The"], answer:"An"},
      {id:"a2", topic:"articles", type:"mcq", q:"I have __ book.", choices:["a","an","the"], answer:"a"},
      {id:"a3", topic:"articles", type:"dropdown", q:"__ sun rises in the east.", choices:["A","An","The"], answer:"The"},
      {id:"a4", topic:"articles", type:"dropdown", q:"This is __ orange.", choices:["a","an","the"], answer:"an"},

      // Present Simple
      {id:"s1", topic:"presentSimple", type:"mcq", q:"He __ football on Fridays.", choices:["play","plays","playing"], answer:"plays"},
      {id:"s2", topic:"presentSimple", type:"mcq", q:"They __ to school by bus.", choices:["go","goes","going"], answer:"go"},
      {id:"s3", topic:"presentSimple", type:"dropdown", q:"She __ English every day.", choices:["study","studies","studying"], answer:"studies"},
      {id:"s4", topic:"presentSimple", type:"dropdown", q:"We __ breakfast at 7 a.m.", choices:["have","has","having"], answer:"have"},

      // Prepositions in/on/at
      {id:"pr1", topic:"prepositions", type:"mcq", q:"The meeting is __ 8 o'clock.", choices:["in","on","at"], answer:"at"},
      {id:"pr2", topic:"prepositions", type:"mcq", q:"My birthday is __ May.", choices:["in","on","at"], answer:"in"},
      {id:"pr3", topic:"dropdown", q:"The book is __ the table.", choices:["in","on","at"], answer:"on"},
      {id:"pr4", topic:"dropdown", q:"We have English __ Monday.", choices:["in","on","at"], answer:"on"},
	  
	  { id:"u1-v-1", topic:"vocabulary", type:"mcq", q:"See you _____, Faisal.", choices:["bye","later","night","goodbye"], answer:"later" },
  { id:"u1-v-2", topic:"vocabulary", type:"mcq", q:"Good _____, Mr. Ali.", choices:["days","meet","hello","evening"], answer:"evening" },
  { id:"u1-v-3", topic:"vocabulary", type:"mcq", q:"Nice to _____ you, Mona.", choices:["meet","name","friend","call"], answer:"meet" },
  { id:"u1-v-4", topic:"vocabulary", type:"mcq", q:"Amira, this is my _____ Fatima. Fatima, this is Amira.", choices:["fine","name","meet","friend"], answer:"friend" },
  { id:"u1-v-5", topic:"vocabulary", type:"mcq", q:"Bye. Take _____.", choices:["later","night","care","fine"], answer:"care" },
  { id:"u1-v-6", topic:"vocabulary", type:"mcq", q:"Iâ€™m Robert. But my friends _____ me Bob.", choices:["name","Iâ€™m","call","are"], answer:"call" },

  { id:"u1-g-1", topic:"grammar", type:"mcq", q:"Mr. Smith _____ a teacher.", choices:["am","is","his","are"], answer:"is" },
  { id:"u1-g-2", topic:"grammar", type:"mcq", q:"_____ students.", choices:["Iâ€™m","Heâ€™s","Are","Theyâ€™re"], answer:"Theyâ€™re" },
  { id:"u1-g-3", topic:"grammar", type:"mcq", q:"Asma and Nura _____ friends.", choices:["am","is","are","sheâ€™s"], answer:"are" },
  { id:"u1-g-4", topic:"grammar", type:"mcq", q:"Mrs. Jones _____ my neighbor.", choices:["her","she","are","is"], answer:"is" },
  { id:"u1-g-5", topic:"grammar", type:"mcq", q:"Whatâ€™s _____ name?", choices:["you","your","youâ€™re","is"], answer:"your" },

  { id:"u1-g-6", topic:"grammar", type:"dropdown", q:"You are a student. _____ nameâ€™s Adnan.", choices:["My","Your","His","Their"], answer:"Your" },
  { id:"u1-g-7", topic:"grammar", type:"dropdown", q:"Heâ€™s the principal. _____ nameâ€™s Mr. Hansen.", choices:["My","Your","His","Their"], answer:"His" },
  { id:"u1-g-8", topic:"grammar", type:"dropdown", q:"Iâ€™m a student. _____ nameâ€™s Nawal.", choices:["My","Your","His","Their"], answer:"My" },
  { id:"u1-g-9", topic:"grammar", type:"dropdown", q:"They are students. _____ names are Fatima and Badria.", choices:["My","Your","His","Their"], answer:"Their" },

  { id:"u2-v-1", topic:"vocabulary", type:"dropdown", q:"_____ is the third month of the year.", choices:["March","June","October","December"], answer:"March" },
  { id:"u2-v-2", topic:"vocabulary", type:"dropdown", q:"_____ is the tenth month of the year.", choices:["March","June","October","December"], answer:"October" },
  { id:"u2-v-3", topic:"vocabulary", type:"dropdown", q:"_____ is the sixth month of the year.", choices:["March","June","October","December"], answer:"June" },
  { id:"u2-v-4", topic:"vocabulary", type:"dropdown", q:"_____ is the twelfth month of the year.", choices:["March","June","October","December"], answer:"December" },
  { id:"u2-v-5", topic:"vocabulary", type:"dropdown", q:"Today is Tuesday. Tomorrow is _____.", choices:["Monday","Wednesday","Friday","Saturday"], answer:"Wednesday" },
  { id:"u2-v-6", topic:"vocabulary", type:"dropdown", q:"Today is Friday. Tomorrow is _____.", choices:["Thursday","Sunday","Saturday","Monday"], answer:"Saturday" },
  { id:"u2-v-7", topic:"vocabulary", type:"dropdown", q:"Today is Sunday. Tomorrow is _____.", choices:["Monday","Tuesday","Friday","Saturday"], answer:"Monday" },
  { id:"u2-v-8", topic:"vocabulary", type:"dropdown", q:"Today is July thirty-first. Tomorrow is _____.", choices:["August first","June first","March first","October first"], answer:"August first" },

  { id:"u2-g-1", topic:"grammar", type:"dropdown", q:"Their final test is __ April 14th.", choices:["in","on","at"], answer:"on" },
  { id:"u2-g-2", topic:"grammar", type:"dropdown", q:"English class is __ Tuesdays and Thursdays.", choices:["in","on","at"], answer:"on" },
  { id:"u2-g-3", topic:"grammar", type:"dropdown", q:"His driving test is __ November.", choices:["in","on","at"], answer:"in" },

  { id:"u2-g-4", topic:"grammar", type:"dropdown", q:"_____ is their wedding? â€“ Itâ€™s in September.", choices:["What","When","How","Where"], answer:"When" },
  { id:"u2-g-5", topic:"grammar", type:"dropdown", q:"_____ old are you? â€“ Iâ€™m twelve years old.", choices:["What","When","How","Where"], answer:"How" },
  { id:"u2-g-6", topic:"grammar", type:"dropdown", q:"_____ is the date today? â€“ Itâ€™s February 4th.", choices:["What","When","How","Where"], answer:"What" },

  { id:"u3-v-1", topic:"vocabulary", type:"mcq", q:"I use a ________ to add numbers.", choices:["calculator","car","airplane","diamond"], answer:"calculator" },
  { id:"u3-v-2", topic:"vocabulary", type:"mcq", q:"She takes photographs with a ________.", choices:["headphones","key","camera","lamp"], answer:"camera" },
  { id:"u3-v-3", topic:"vocabulary", type:"mcq", q:"He watches movies on a ________.", choices:["pencil","laptop","meteor","headphones"], answer:"laptop" },
  { id:"u3-v-4", topic:"vocabulary", type:"mcq", q:"I ride a ________.", choices:["bike","airplane","radio","computer"], answer:"bike" },
  { id:"u3-v-5", topic:"vocabulary", type:"mcq", q:"The baby wants a ________.", choices:["laptop","television","bad","toy"], answer:"toy" },
  { id:"u3-v-6", topic:"vocabulary", type:"mcq", q:"I need ________ to open these doors.", choices:["keys","typewriters","toys","watches"], answer:"keys" },
	  
    ];

    // =============== Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© ===============
    const $ = s => document.querySelector(s);
    const rand = a => a[Math.floor(Math.random()*a.length)];
    const shuffle = a => a.map(v=>({v, r:Math.random()})).sort((x,y)=>x.r-y.r).map(o=>o.v);

    // =============== Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© ===============
    let state = {
      topic: 'all',
      mode: 'mcq',
      questions: [],
      i: 0,
      score: 0,
      locked: false,
    };

    // =============== Ø±Ø¨Ø· Ø§Ù„Ø¹Ù†Ø§ØµØ± ===============
    const els = {
      topic: $('#topic'), mode: $('#mode'),
      start: $('#start'), game: $('#game'), summary: $('#summary'),
      qIndex: $('#qIndex'), qTotal: $('#qTotal'), score: $('#score'),
      bar: $('#bar'), badgeTopic: $('#badgeTopic'), modeTag: $('#modeTag'),
      qText: $('#qText'), mcq: $('#mcq'), dd: $('#dropdown'),
      next: $('#next'), skip: $('#skip'), feedback: $('#feedback'),
      sTotal: $('#sTotal'), sRight: $('#sRight'), sPct: $('#sPct'), restart: $('#restart'),
    };

    // =============== ØªÙ‡ÙŠØ¦Ø© ===============
    function buildDeck(topic, mode){
      let pool = BANK.filter(q => topic==='all' || q.topic===topic);
      if(mode==='mcq') pool = pool.filter(q=>q.type==='mcq');
      if(mode==='dropdown') pool = pool.filter(q=>q.type==='dropdown');
      // Ø®Ø° Ø­ØªÙ‰ 10 Ø£Ø³Ø¦Ù„Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹
      pool = shuffle(pool).slice(0, Math.min(10, pool.length));
      return pool;
    }

    function startGame(){
      state.topic = els.topic.value;
      state.mode = els.mode.value;
      state.questions = buildDeck(state.topic, state.mode);
      state.i = 0; state.score = 0; state.locked = false;
      els.qTotal.textContent = state.questions.length;
      els.score.textContent = state.score;
      els.badgeTopic.textContent = topicLabel(state.topic);
      els.modeTag.textContent = state.mode==='mcq' ? 'Ø§Ø®ØªÙŠØ§Ø±' : 'Ø§Ù…Ù„Ø£ Ø§Ù„ÙØ±Ø§Øº';
      els.summary.classList.add('hidden');
      els.game.classList.remove('hidden');
      renderQ();
    }

    function topicLabel(t){
      return {
        all:'ÙƒÙ„ Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹', toBe:'to be', pronouns:'Ø§Ù„Ø¶Ù…Ø§Ø¦Ø±', articles:'a/an/the', presentSimple:'Ø§Ù„Ù…Ø¶Ø§Ø±Ø¹ Ø§Ù„Ø¨Ø³ÙŠØ·', prepositions:'Ø­Ø±ÙˆÙ Ø§Ù„Ø¬Ø±'
      }[t] || t;
    }

    function renderQ(){
      const q = state.questions[state.i];
      if(!q){ return endGame(); }
      els.qIndex.textContent = state.i+1;
      els.bar.style.width = `${((state.i)/state.questions.length)*100}%`;
      els.feedback.textContent = '';
      els.next.disabled = true;
      state.locked = false;

      els.qText.textContent = q.q;
      els.mcq.classList.add('hidden');
      els.dd.classList.add('hidden');

      if(q.type==='mcq') renderMCQ(q); else renderDropdown(q);
    }

    function renderMCQ(q){
      els.mcq.innerHTML = '';
      els.mcq.classList.remove('hidden');
      const choices = shuffle(q.choices.slice());
      for(const c of choices){
        const btn = document.createElement('button');
        btn.className = 'opt';
        btn.textContent = c;
        btn.addEventListener('click', ()=>choose(c, q.answer, btn));
        els.mcq.appendChild(btn);
      }
    }

    function renderDropdown(q){
      els.dd.innerHTML = '';
      els.dd.classList.remove('hidden');
      const label = document.createElement('label');
      label.className = 'tiny';
      label.textContent = 'Ø§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:';

      const select = document.createElement('select');
      select.className = 'opt';
      select.innerHTML = '<option value="">â€” Ø§Ø®ØªØ± â€”</option>' + q.choices.map(c=>`<option value="${c}">${c}</option>`).join('');
      select.addEventListener('change', ()=>{
        if(!select.value) return;
        choose(select.value, q.answer, select);
      });

      els.dd.appendChild(label);
      els.dd.appendChild(document.createElement('br'));
      els.dd.appendChild(select);
    }

    function choose(value, answer, el){
      if(state.locked) return; // Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±
      state.locked = true;
      const ok = value === answer;
      if(ok){
        state.score++; els.score.textContent = state.score;
        els.feedback.textContent = 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© âœ…';
        el.classList.add('correct');
      } else {
        els.feedback.textContent = `Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© âŒ â€” Ø§Ù„ØµØ­ÙŠØ­Ø©: ${answer}`;
        el.classList.add('wrong');
        // Ù„Ùˆ ÙƒØ§Ù†Øª MCQ: Ù„ÙˆÙ† Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„ØµØ­ÙŠØ­
        document.querySelectorAll('.opt').forEach(o=>{
          if(o.textContent===answer) o.classList.add('correct');
        });
      }
      els.next.disabled = false;
    }

    function nextQ(){
      state.i++;
      if(state.i>=state.questions.length){ endGame(); return; }
      renderQ();
    }

    function endGame(){
      els.bar.style.width = '100%';
      els.game.classList.add('hidden');
      const total = state.questions.length;
      const right = state.score;
      const pct = Math.round((right/Math.max(1,total))*100);
      els.sTotal.textContent = total;
      els.sRight.textContent = right;
      els.sPct.textContent = pct + '%';
      els.summary.classList.remove('hidden');
    }

    // =============== Ø£Ø­Ø¯Ø§Ø« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ===============
    els.start.addEventListener('click', startGame);
    els.next.addEventListener('click', nextQ);
    els.skip.addEventListener('click', nextQ);
    els.restart.addEventListener('click', ()=>{
      els.summary.classList.add('hidden');
      startGame();
    });

    // ØªØ´ØºÙŠÙ„ Ù…Ø¨Ø¯Ø¦ÙŠ Ø¨Ø³ÙŠØ· (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
    // startGame();
  </script>
</body>
</html>
